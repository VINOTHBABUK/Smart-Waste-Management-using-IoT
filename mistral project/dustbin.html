<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="dustbin.css">
</head>
<body>
  <div class="dustbin">
    <div class="lid"></div>
    <div class="bin" id="bin"></div>
  </div>
  <div class="percentage" id="percentage">0%</div>

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyCEsylIm412gqUfcc9gnPTMmHJbX0O0KaE",
        authDomain: "dustbin-monitor-1102f.firebaseapp.com",
        databaseURL: "https://dustbin-monitor-1102f-default-rtdb.firebaseio.com",
        projectId: "dustbin-monitor-1102f",
        storageBucket: "dustbin-monitor-1102f.appspot.com",
        messagingSenderId: "5065718611",
        appId: "1:5065718611:web:1aa84f7f92744a7f8e3fa6",
        measurementId: "G-YGTVSNME62"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Reference to Firebase Realtime Database
    const database = firebase.database();

    const bin = document.getElementById("bin");
    const percentage = document.getElementById("percentage");

    function updateFillLevel(level) {
      bin.style.height = level + "%";
      percentage.textContent = level + "%";

      bin.className = level >= 75 ? "red-fill" : "blue-fill";
    }

    function fetchSensorData() {
      const levelRef = database.ref("sensor/Level");

      levelRef.on("value", (snapshot) => {
        const level = snapshot.val();

        if (level) {
          updateFillLevel(level);
        }
      });
    }

    fetchSensorData();
  </script>
</body>
</html>


<!-- //       import { database,doc,getDoc } from './util.js'

// // Retrieve the level value from Firebase and update the UI

//   let prev = 0;

//   async function getSensor(){
//     const leveldoc = await getDoc(doc(database,"data","level"))


//     const level = leveldoc.data().sensor

//     if(level === prev) return;

//     const bin = document.getElementById("bin");
//     const percentage = document.getElementById("percentage");

//     bin.style.height = level + "%";
//     percentage.textContent = level + "%";

//     //bin.classList.remove("blue-fill");
//     if (level >= 1) {

//       bin.className = level >=75 ? "red-fill" : "blue-fill"

//     } 
//   }

//     getSensor()
//     // setInterval(getSensor,3000) -->


    
    
    <!-- //  <script type="module" src="./util.js">

    // </script> -->

  </script>
      
</body>
</html>


<!-- 
<!DOCTYPE html>
<html>
<head>
  <title>Animated Dustbin</title>
  <style>
    .dustbin {
      position: relative;
      width: 200px;
      height: 300px;
      background-color: #f2f2f2;
      margin: 50px auto;
      border-radius: 10px;
      overflow: hidden;
      animation: shake 2s infinite;
    }

    .lid {
      position: absolute;
      top: -10px;
      left: 0;
      right: 0;
      height: 50px;
      background-color: #ff5b5b;
      border-radius: 10px 10px 0 0;
      animation: lidOpen 2s infinite;
    }

    .lid::before {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 10px;
      background-color: #ff5b5b;
    }

    .bin {
      position: absolute;
      bottom: 0;
      left: 50px;
      width: 100px;
      height: 200px;
      background-color: #4cb8ff;
      border-radius: 0 0 10px 10px;
      animation: binOpen 2s infinite;
    }

    .bin::before {
      content: "";
      position: absolute;
      top: 20px;
      left: 10px;
      width: 80px;
      height: 120px;
      background-color: #ffd400;
      border-radius: 5px;
      animation: binOpen 2s infinite;
    }

    @keyframes shake {
      0% {
        transform: rotateZ(0deg);
      }
      50% {
        transform: rotateZ(-10deg);
      }
      100% {
        transform: rotateZ(10deg);
      }
    }

    @keyframes lidOpen {
      0%, 50% {
        transform: rotateZ(0deg);
      }
      100% {
        transform: rotateZ(-20deg);
      }
    }

    @keyframes binOpen {
      0%, 50% {
        transform: scaleY(1);
      }
      100% {
        transform: scaleY(0.8);
      }
    }
  </style>
</head>
<body>
  <div class="dustbin">
    <div class="lid"></div>
    <div class="bin"></div>
  </div>
</body>
</html> -->
